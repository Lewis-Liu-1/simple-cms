<?php
	class web_menus
	{
		private $links;
				
		function  __construct()
		{
			$this->absolute=RootDir.DataDir;//self::data_folder;
			$this->relative=DataDir;
		}
		
		public function print_menus($menus)
		{
			global $_QHOME,$_QCATE,$_QID;
			//var_dump($menus);
			echo "<div id=\"menu\">";
	 		echo "<ul>";
			foreach($menus as $key =>$val)
			{
				if (is_array($val))
				{
					echo "<li>";
					echo "<a href=\"/index.php?$_QID=".bin2hex($key)."\">".basename($key)."</a>";
					//$this->show_submenus($key,$val);
					echo "</li>";
				}
			}
			echo "</ul>";    
			echo "</div>";
		}
		private function show_submenus($from,$k)
		{
			global $_QHOME,$_QCATE;
			//$k=current($k);
	 		if (count($k)==0) return;
			//var_dump($k);
	 		echo "<ul>";
	 		//echo "<ul>";
			foreach($k as $key=>$val)
			{
				if (is_array($val))
				{
					echo "<li>";
					$link=$key;//str_replace(" ","%20",$key);
					echo "<a href='/index.php?$_QHOME=".bin2hex($from)."&$_QCATE=".bin2hex($link)."'>".$key."</a>";
					echo "</li>";
				}	
			}
			echo "</ul>";    
		}
		
		public function print_cat($h,$menus)
		{
			global $_QHOME,$_QCATE,$_QID;
			$row=0;
			$col=0;
			echo "&nbsp;&nbsp;You are at:&nbsp;&nbsp;<a href='/index.php?$_QHOME=".bin2hex($h)."'>".$h."</a><br/>";
			echo "<div class ='categories'>";
			echo "<table class='customers'>\n";
			echo "<tr>";
  			echo "<th>Category</th>";
  			echo "<th>Items</th>";
			echo "</tr>";
			echo "<tr>";
			foreach($menus as $main=>$sub)
			{
				if (strcmp($main,$h)==0)
				{
					if (is_array($sub))
					{
						foreach($sub as $key =>$v)
						{
							if (is_array($v)) 
							{
								echo "<td>";
								echo "<a href='/index.php?$_QHOME=".bin2hex($h)."&$_QCATE=".bin2hex($key);
								echo "'>".$key;
								echo "</td>";
								echo "<td>";
								echo "&nbsp;&nbsp;&nbsp;&nbsp;".count($v)."";								
								echo "</a>";
								echo "</td>";
								$col++;
								if ($col>0) {$col=0;echo "</tr><tr>";}
							}
						}	
					}	
				}	
			}
			echo "</tr></table></div>";
		}
		
		public function print_web_path($directory)
		{
			global $_QHOME,$_QCATE,$_QID;
			echo "<div class='webpath'>You are at: &nbsp;";
			$i=0;
			foreach($directory as $val)
			{
				if ($i>0) {
					echo "&nbsp;&gt;&nbsp;";
					$repeat.='/';
				}	
				$repeat.=$val;
				echo "<a href='/index.php?$_QID=".bin2hex($repeat);
				echo "'>".basename($val,".txt");
				echo "</a>";
				$i++;
			}
			echo "</div>";
		}
		
		public function print_links($src,$seed)
		{
			//var_dump($src);
			//echo "<br/>";			
			//var_dump($seed);
			//echo "<br/>";			

			global $_QHOME,$_QCATE,$_QID;
			$f=implode("/", $src);
			echo "<div class ='categories'>";
			echo "<table class='customers'>\n";
			echo "<tr>";
  			echo "<th>Category</th>";
  			echo "<th>Items</th>";
			echo "</tr>";
			echo "<tr>";
			foreach($seed as $key =>$val)
			{
				echo "<td>";
				echo "<a href='"."/index.php?$_QID=".bin2hex($f.'/'.$key);
				echo "'>".basename($key,".txt");
				echo "</a>";
				echo "</td>";
				echo "<td>";
				if (is_array($val))
				{
					echo "&nbsp;&nbsp;&nbsp;&nbsp;".count($val)."";								
				}
				echo "</td>";
				$col++;
				if ($col>0) {$col=0;echo "</tr><tr>";}
			}
			echo "</tr></table></div>";
		}	
		
		public function print_bookmark()
		{
			echo "<span id=\"bookmark\">&nbsp;&nbsp;|&nbsp;&nbsp;";
			//echo "<a href='#bottom_section'> Files in this category</a";
			echo "</span>";
		}
		
	}
?>
